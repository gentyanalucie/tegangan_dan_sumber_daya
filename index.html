<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f4f8;
        padding: 20px;
    }

    .quiz-box {
        max-width: 600px;
        margin: auto;
        background: #fff;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .progress {
        font-size: 14px;
        color: #555;
        margin-bottom: 10px;
    }

    .question {
        font-weight: bold;
        margin-bottom: 15px;
    }

    .option {
        display: block;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 6px;
        margin-bottom: 8px;
        cursor: pointer;
    }

    .option:hover {
        background: #eef3ff;
    }

    .option.correct {
        background: #d1fae5;
        border-color: #10b981;
    }

    .option.wrong {
        background: #fee2e2;
        border-color: #ef4444;
    }

    button {
        margin-top: 15px;
        padding: 10px 15px;
        background: #2563eb;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }

    button:disabled {
        background: #9ca3af;
        cursor: not-allowed;
    }

    .score {
        text-align: center;
        font-size: 20px;
        font-weight: bold;
    }

    .status {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 12px;
    color: #374151;
}

.option.correct {
    background: #dcfce7;
    border-color: #22c55e;
    color: inherit;
}

.option.wrong {
    background: #fee2e2;
    border-color: #ef4444;
    color: inherit;
}

.option.selected {
    background: #e0e7ff;
    border-color: #2563eb;
}



</style>
</head>

<div class="quiz-box">

    <!-- TOP STATUS -->
    <div class="status">
        <span id="progress"></span>
        <span id="score"></span>
    </div>

    <div class="question" id="question"></div>
    <div id="options"></div>

    <button id="nextBtn" onclick="nextQuestion()" disabled>Next</button>

</div>


<script>
    const rawQA = `1|Apa yang dimaksud dengan elemen catu daya?|Alat penyimpan energi|Alat pengatur sinyal|Alat yang berfungsi menyuplai daya listrik ke beban|Alat pengaman rangkaian|c|
2|Apa yang dimaksud dengan beban listrik?|Sumber listrik|Alat pengaman|Alat yang membutuhkan sumber listrik untuk dapat bekerja|Pengatur arus|c|
3|Apa yang dimaksud dengan tegangan listrik?|Besar arus listrik yang melewati penampang konduktor|Resistansi listrik yang menghambat aliran arus dalam rangkaian|Beda potensial yang mendorong aliran arus dalam rangkaian|Banyaknya energi listrik yang mengalir dalam rangkaian|c|
4|Berapakah tegangan baterai yang dibutuhkan untuk menghidupkan handphone?|Â± 3V|Â± 3,5V|Â± 3,85V|Â± 5V|c|
5|Berapakah besar tegangan VBAT?|Â± 3V|Â± 3,5V|Â± 3.85|Â± 5V|c|
7|Apa yang dimaksud dengan tegangan nominal pada peralatan elektronik?|Tegangan maksimum yang ditetapkan oleh produsen agar peralatan bekerja normal|Tegangan minimum yang ditetapkan oleh produsen agar peralatan bekerja normal|Tegangan rata-rata yang ditetapkan oleh produsen agar peralatan bekerja normal|Tegangan cadangan yang ditetapkan oleh produsen agar peralatan bekerja normal|c|
8|Apa yang terjadi jika tegangan suplai lebih kecil dari tegangan nominal?|Peralatan bekerja normal|Peralatan menjadi panas|Peralatan tidak dapat bekerja|Peralatan bekerja lebih cepat|c|
9|Apa yang terjadi jika tegangan suplai lebih besar dari tegangan nominal?|Peralatan aman|Peralatan bekerja normal|Menimbulkan panas dan berpotensi terbakar|Tidak berpengaruh|c|
10|Apa fungsi utama PSU (Power Supply Unit)?|Mengukur arus|Mengatur sinyal|Menyuplai daya ke peralatan elektronik|Menyimpan energi|c|
11|Salah satu fungsi PSU adalah?|Mengisi memori|Mendeteksi short dan kondisi abnormal|Menguatkan sinyal|Mengatur frekuensi|b|
12|Salah satu fungsi PSU adalah?|Mengganti baterai|Menghidupkan handphone tanpa baterai|Mengisi IC|Menghapus data|b|
13|Apa yang harus dilakukan teknisi sebelum menghubungkan PSU ke handphone?|Menaikkan arus|Menurunkan tegangan|Menyesuaikan tegangan output sesuai tegangan nominal baterai|Menghubungkan langsung|c|
14|Apa yang harus dilakukan sebelum menggunakan PSU?|Mengganti probe|Mengatur mode AC|Mengatur pembatas arus (OCP)|Mengatur frekuensi|c|
15|Apa yang harus dilakukan sebelum menghubungkan kabel PSU ke mesin handphone?|Membersihkan kabel|Memastikan polaritas (+) dan (-) tidak terbalik|Menaikkan arus|Menurunkan tegangan|b|
16|Apa akibat menyepelekan pengaturan PSU?|PSU rusak|Handphone mati sementara|Kerusakan serius pada mainboard|Tidak berpengaruh|c|
17|Mengapa tegangan output PSU perlu diukur sebelum digunakan?|Untuk menaikkan daya|Untuk menghemat listrik|Memastikan tegangan sesuai dengan indikator PSU|Untuk menurunkan arus|c|
18|Bagaimana cara mengukur tegangan output PSU?|Mode ohm, probe merah ke (+) dan hitam ke (-)|Mode dioda, probe merah ke (+) dan hitam ke (-)|Multimeter mode DC, probe merah ke (+) dan hitam ke (-)|Mode AC, probe merah ke (+) dan hitam ke (-)|c|
19|Jenis baterai yang umum digunakan pada handphone adalah?|Ni-Cd|Ni-MH|Lithium-Polymer (Li-Po)|Lead Acid|c|
20|Salah satu peran baterai pada handphone adalah?|Menyimpan data|Menyediakan tegangan utama|Menguatkan sinyal|Mengatur arus|b|
21|Salah satu peran baterai pada handphone adalah?|Mengatur tegangan IC|Menyuplai arus tinggi saat dibutuhkan sistem|Mendinginkan sistem|Mengisi memori|b|
22|Komponen yang terdapat pada baterai handphone adalah?|Resistor|Kapasitor|BMS|Induktor|c|
23|Apa kepanjangan dari BMS?|Battery Monitoring System|Battery Management System|Board Management System|Battery Main Supply|b|
24|Salah satu fungsi BMS adalah?|Menguatkan sinyal|Mengontrol proses charging dan discharging|Menyimpan arus|Mengatur frekuensi|b|
25|Salah satu komponen pada baterai adalah?|IC Power|Fuse|Resistor|Dioda|b|
26|Apa fungsi fuse baterai?|Menaikkan arus|Menurunkan tegangan|Pengaman terhadap arus berlebih|Pengatur suhu|c|
27|Bagaimana cara kerja fuse baterai?|Menyimpan energi|Menguatkan arus|Putus saat arus berlebih untuk melindungi baterai|Mengatur tegangan|c|
28|Salah satu komponen pada baterai adalah?|Flexible baterai|IC RF|Kapasitor|Induktor|a|
29|Salah satu komponen pada baterai adalah?|Speaker|Konektor baterai|Mikrofon|Kamera|b|
30|Manakah yang termasuk sistem proteksi baterai?|Overclock protection|Overcharge protection|Overvoltage IC|Short circuit IC|b|
31|Apa yang dimaksud proteksi overcharge pada baterai?|Proteksi saat baterai kosong|Proteksi saat suhu tinggi|Proteksi saat baterai diisi melebihi kapasitas|Proteksi arus kecil|c|
32|Manakah yang termasuk sistem proteksi baterai?|Overdischarge protection|Overclock protection|Overboost protection|Oversignal protection|a|
33|Apa yang dimaksud proteksi overdischarge pada baterai?|Proteksi suhu tinggi|Proteksi arus tinggi|Proteksi saat tegangan sel terlalu rendah|Proteksi saat tegangan tinggi|c|
34|Manakah yang termasuk sistem proteksi baterai?|Overtemperature protection|Overclock protection|Overboost protection|Oversignal protection|a|
35|Apa yang dimaksud proteksi overtemperature pada baterai?|Proteksi saat arus besar|Proteksi saat tegangan rendah|Proteksi saat suhu melebihi batas aman|Proteksi saat baterai penuh|c|
36|Manakah yang termasuk sistem proteksi baterai?|Overcurrent protection|Overspeed protection|Overboost protection|Overclock protection|a|
37|Apa yang dimaksud proteksi overcurrent pada baterai?|Proteksi suhu tinggi|Proteksi saat arus melebihi batas|Proteksi tegangan rendah|Proteksi kapasitas|b|
38|Apa yang terjadi saat sistem proteksi baterai aktif?|Baterai rusak total|Baterai terlihat tidak berfungsi meskipun sel masih baik|Handphone menyala normal|Tegangan meningkat|b|
39|Kerusakan yang umum terjadi pada baterai adalah?|IC short|Baterai kembung|Speaker rusak|Kamera rusak|b|
40|Kerusakan yang umum terjadi pada baterai adalah?|Fuse putus|IC RF rusak|CPU mati|Baseband error|a|
41|Kerusakan yang umum terjadi pada baterai adalah?|Tegangan terlalu rendah|Tegangan terlalu tinggi|Arus terlalu besar|Suhu rendah|a|
42|Kerusakan yang umum terjadi pada baterai adalah?|Flexible baterai putus|IC audio rusak|Speaker mati|LCD blank|a|
43|Apa yang dimaksud dengan jumper fuse baterai?|Mengganti fuse|Menyambung kedua pin fuse dengan kawat penghantar|Melepas fuse|Menggandakan fuse|b|
44|Apa efek samping dari jumper fuse baterai?|Meningkatkan daya|Menghilangkan sistem pengaman baterai|Menurunkan tegangan|Menghemat arus|b|
45|Apa yang dimaksud dengan tembak baterai?|Penggantian baterai|Pengosongan baterai|Pengisian manual dengan PSU secara bertahap|Pendinginan baterai|c|
46|Kapan prosedur tembak baterai dilakukan?|Saat baterai penuh|Saat baterai panas|Saat baterai low voltage|Saat baterai normal|c|
47|Aspek K3 dalam penanganan baterai adalah?|Menghubungkan langsung ke PSU|Menghindari short circuit|Menaikkan arus|Menurunkan tegangan|b|
48|Aspek K3 dalam penanganan baterai adalah?|Menusuk baterai|Memanaskan baterai|Tidak menusuk atau memanaskan baterai|Merendam baterai|c|
49|Aspek K3 dalam penanganan baterai adalah?|Mendekatkan ke air|Menjauhkan baterai dari air|Mencuci baterai|Menyimpan di air|b|
1|Salah satu komponen pada rangkaian listrik sederhana?|Sumber tegangan|Fuse|IC|Sensor|a|
2|Salah satu komponen pada rangkaian listrik sederhana?|Buzzer|Penghantar (jalur/kabel)|IC|Kamera|b|
3|Salah satu komponen pada rangkaian listrik sederhana?|Beban|Antena|Kristal|CPU|a|
4|Salah satu komponen pada rangkaian listrik sederhana?|Saklar|Resistor|IC Power|Speaker|a|
5|Fungsi baterai pada rangkaian listrik sederhana?|Sumber tegangan|Penguat sinyal|Pendingin|Proteksi suhu|a|
6|Fungsi saklar pada rangkaian listrik sederhana?|Penghubung dan pemutus arus|Penyimpan energi|Penguat arus|Penurun tegangan|a|
7|Posisi lampu pada rangkaian listrik sederhana?|Beban yang menggunakan energi listrik|Sumber tegangan|Pengaman|Pengatur arus|a|
8|Cara kerja rangkaian listrik sederhana ketika saklar ON?|Arus mengalir dari baterai ke lampu sehingga lampu menyala|Arus terputus sehingga lampu mati|Lampu mati karena tidak ada arus|Tidak ada arus yang mengalir di rangkaian|a|
9|Cara kerja rangkaian listrik sederhana ketika saklar OFF?|Arus terputus sehingga lampu mati|Lampu menyala|Arus tetap mengalir|Tegangan meningkat|a|
10|Salah satu penyebab kerusakan rangkaian listrik?|Putus jalur|IC original|Tegangan stabil|Komponen normal|a|
11|Salah satu penyebab putus jalur di mainboard?|Korosi akibat air|Update software|Overheat CPU|Baterai penuh|a|
12|Salah satu penyebab putus jalur di mainboard?|PCB tergores|LCD rusak|Speaker mati|OS error|a|
13|Salah satu penyebab putus jalur di mainboard?|PCB kembung|Antena panjang|IC baru|Kamera besar|a|
14|Dampak dari putus jalur?|Tegangan tidak hadir pada beban|Arus stabil|IC bekerja normal|Daya meningkat|a|
15|Cara mengukur apakah jalur putus atau tidak?|multimeter mode buzzer, kedua probe diletakkan pada dua titik yang akan diukur|Mode arus, , kedua probe diletakkan pada dua titik yang akan diukur|Mode tegangan AC, , kedua probe diletakkan pada dua titik yang akan diukur|Mode suhu, , kedua probe diletakkan pada dua titik yang akan diukur|a|
16|Ciri jalur terhubung saat diukur mode buzzer?|Multimeter berbunyi|Nilai O.L|Tidak ada respon|Angka berubah-ubah|a|
17|Ciri jalur tidak terhubung saat diukur mode buzzer?|Multimeter tidak berbunyi|Multimeter berbunyi|Nilai normal|Arus mengalir|a|
18|Pada multimeter, probe hitam terhubung ke terminal?|COM|VÎ©|A|mA|a|
19|Pengukuran mode buzzer termasuk mode pasif artinya?|Dilakukan tanpa sumber tegangan|Dilakukan saat menyala|Menggunakan PSU|Menggunakan baterai|a|
20|Apa yang dimaksud pengukuran continuity jalur?|Mengukur keterhubungan jalur|Mengukur tegangan|Mengukur arus|Mengukur suhu|a|
21|Prosedur yang bisa dilakukan ketika jalur terputus?|Jumper|Update firmware|Ganti LCD|Flash ulang|a|
22|Salah satu ciri short circuit/korsleting?|Jalur positif dan negatif terhubung langsung|Jalur normal|Arus kecil|Tegangan stabil|a|
23|Salah satu ciri short circuit/korsleting?|Hambatan sangat kecil|Hambatan besar|Nilai normal|Tidak terukur|a|
24|Salah satu ciri short circuit/korsleting?|Arus mengalir berlebihan|Arus stabil|Tidak ada arus|Tegangan turun|a|
25|Salah satu penyebab short circuit/korsleting?|Timah solder berlebih|PCB bersih|IC original|Tegangan normal|a|
26|Salah satu penyebab short circuit/korsleting?|Komponen rusak|Software error|LCD pecah|Speaker mati|a|
27|Salah satu penyebab short circuit/korsleting?|Jalur PCB saling menempel|Baterai penuh|CPU cepat|Sinyal kuat|a|
28|Salah satu dampak short circuit/korsleting?|PSU menunjukkan arus tinggi|Arus normal|Tidak ada respon|Tegangan stabil|a|
29|Salah satu dampak short circuit/korsleting?|IC panas berlebih|IC dingin|IC normal|IC mati total|a|
30|Fungsi pengukuran mode dioda?|Menilai kondisi jalur|Mengukur arus|Mengukur daya|Mengukur suhu|a|
31|Fungsi pengukuran mode dioda?|Mendeteksi short dan jalur abnormal|Mengukur sinyal RF|Mengukur resistansi besar|Mengukur kapasitor|a|
32|Cara menentukan jalur short circuit?|Mode dioda, probe merah ke GND, hitam ke jalur|Mode buzzer dengan baterai terpasang|Mode arus|Mode AC|a|
33|Parameter jalur dikatakan short circuit pada pengukuran mode dioda?|Nilai 0.000 atau mendekati 0.000|Nilai tinggi|Nilai O.L|Tidak terbaca|a|
34|Parameter jalur dikatakan putus pada pengukuran mode dioda?|Nilai O.L (open loop)|Nilai 0.000|Nilai normal|Nilai kecil|a|
35|Parameter jalur dikatakan bocor pada pengukuran mode dioda?|Nilai jauh di bawah nominal|Nilai O.L|Nilai normal|Tidak terukur|a|
36|Ciri jalur normal pada handphone?|Nilai hampir sama dengan handphone normal|Nilai 0.000|Nilai O.L|Arus tinggi|a|
37|Aspek K3 saat mengukur jalur?|Pastikan handphone mati|Pegang IC|Gunakan arus tinggi|Hubungkan PSU|a|
38|Aspek K3 saat pengukuran mode pasif?|Lepas baterai|Pasang charger|Nyalakan HP|Naikkan arus|a|
39|Aspek K3 saat mengukur jalur?|Jangan ukur jalur bertegangan dengan mode dioda/buzzer|Gunakan PSU|Gunakan arus besar|Pegang jalur|a|
40|Aspek K3 saat mengukur jalur?|Pegang probe dengan stabil|Sentuh IC panas|Gunakan tangan basah|Ukur sambil menyalakan HP|a|
1|Apa singkatan dari K3?|Keselamatan Kerja dan Kesehatan|Keamanan Kerja dan Kesehatan|Kesehatan dan Keselamatan Kerja|Kontrol Kerja dan Keselamatan|c|
2|Apa yang dimaksud dengan K3?|Aturan penggunaan alat servis|Prinsip dasar untuk melindungi teknisi, perangkat, dan lingkungan kerja|Cara memperbaiki perangkat|Standar kualitas produk|b|
3|Salah satu fungsi K3 adalah?|Mempercepat servis|Mencegah kerusakan komponen|Menambah keuntungan|Menghemat listrik|b|
4|Salah satu fungsi K3 adalah?|Mencegah kecelakaan kerja|Memperindah area kerja|Meningkatkan kecepatan internet|Mengurangi biaya servis|a|
5|Salah satu fungsi K3 adalah?|Mencegah kebakaran|Menambah daya perangkat|Memperbesar tegangan|Mengganti komponen otomatis|a|
6|Apa singkatan dari ESD?|Electronic Static Device|Electro Static Discharge|Electric Supply Device|Electronic Safety Detector|b|
7|Apa yang dimaksud dengan ESD?|Arus listrik besar|Fenomena terjadinya listrik statis|Tegangan AC tinggi|Gelombang elektromagnetik|b|
8|Efek dari terjadinya ESD adalah?|Perangkat bekerja lebih cepat|Merusak komponen sensitif seperti IC, CPU, dan memori|Mengisi baterai|Mendinginkan IC|b|
9|Salah satu cara mengurangi risiko ESD adalah?|Menggunakan meja kerja anti-statis|Menggunakan meja kayu biasa|Menggunakan sarung tangan kain|Mematikan AC|a|
10|Salah satu cara mengurangi risiko ESD adalah?|Menggunakan alas kerja anti-statis|Menggunakan kertas|Menggunakan plastik biasa|Menggunakan kain basah|a|
11|Salah satu cara mengurangi risiko ESD adalah?|Menggunakan alat servis ramah ESD|Menggunakan alat berkarat|Menggunakan alat tanpa isolasi|Menggunakan alat basah|a|
12|Gelang anti-statis berfungsi untuk?|Memperkuat sinyal|Menyalurkan muatan statis dari tubuh ke ground|Mengukur tegangan|Melindungi dari panas|b|
13|Efek dari korsleting (short circuit) adalah?|IC terbakar|Perangkat lebih dingin|Baterai terisi penuh|Sinyal lebih kuat|a|
14|Efek dari korsleting (short circuit) adalah?|Jalur PCB putus|Konsumsi daya menurun|Perangkat restart normal|Software error|a|
15|Efek dari korsleting (short circuit) adalah?|Handphone mati total|Speaker lebih keras|Layar lebih terang|Sinyal meningkat|a|
16|Langkah pencegahan korsleting adalah?|Mematikan perangkat sebelum diservis|Menambah tegangan|Menghubungkan charger|Menyalakan perangkat|a|
17|Langkah pencegahan korsleting adalah?|Melepas baterai atau konektor baterai|Mengganti LCD|Menekan IC|Menambah arus|a|
18|Langkah pencegahan korsleting adalah?|Menghindari penggunaan alat logam sembarangan|Menggunakan pinset tajam|Menyentuh PCB langsung|Menambah solder|a|
19|Langkah pencegahan korsleting adalah?|Menjaga area kerja bersih dari timah dan sisa solder|Membiarkan area berantakan|Menyimpan baut di PCB|Mencampur komponen|a|
20|Hal yang harus dihindari saat menangani baterai adalah?|Menusuk baterai|Membersihkan konektor|Menyimpan di tempat kering|Menggunakan isolasi|a|
21|Hal yang harus dihindari saat menangani baterai adalah?|Memanaskan baterai secara langsung|Menyimpan di suhu ruang|Melepas konektor|Menggunakan sarung tangan|a|
22|Hal yang harus dihindari saat menangani baterai adalah?|Terkena air|Membersihkan debu|Menyimpan di kotak|Memberi label|a|
23|Hal yang harus dihindari saat menangani baterai adalah?|Menekan baterai berlebihan|Membersihkan casing|Mengukur tegangan|Menyimpan aman|a|
24|Tindakan saat menemukan baterai kembung adalah?|Melepas dan mengganti dengan yang baru|Mengisi ulang baterai|Menusuk baterai|Menekan baterai|a|
25|Apa singkatan APD?|Alat Pelindung Diri|Alat Proteksi Daya|Akses Perangkat Digital|Alat Pengaman Data|a|
26|Yang tidak boleh dilakukan saat menggunakan solder dan blower adalah?|Menyentuh ujung solder atau blower|Mengatur suhu|Menggunakan dudukan|Mematikan alat|a|
27|Mengapa solder dan blower diletakkan di dudukan khusus?|Agar aman dan mengaktifkan fitur sleep|Agar lebih panas|Agar hemat timah|Agar mudah dijangkau saja|a|
28|Bahaya dari penggunaan flux adalah?|Asap sisa pembakaran|Warna PCB berubah|Tegangan turun|Sinyal hilang|a|
29|Yang harus diperhatikan saat menggunakan flux adalah?|Ventilasi ruangan yang baik|Suhu tinggi|Tegangan besar|Lampu redup|a|
30|Yang harus diperhatikan saat menggunakan flux adalah?|Menggunakan fan extractor atau exhaust fan|Menggunakan kipas biasa|Menutup ruangan|Mematikan blower|a|
31|Yang harus diperhatikan saat menggunakan flux adalah?|Menghindari menghirup asap langsung|Menghirup asap|Mendekatkan wajah|Menutup mata|a|
32|Standar K3 dalam mengatur area kerja adalah?|Memisahkan alat, komponen, dan unit servis|Mencampur semua alat|Menumpuk komponen|Meletakkan sembarang|a|
33|Standar K3 dalam mengatur area kerja adalah?|Menyimpan baut dan part kecil di wadah khusus|Menaruh di meja|Menaruh di PCB|Menyimpan di saku|a|
34|Standar K3 dalam manajemen area kerja adalah?|Menjauhkan cairan dari area elektronik|Meletakkan cairan dekat PCB|Menyimpan air di meja|Membersihkan dengan air|a|
35|Kesalahan dalam penggunaan PSU adalah?|Tidak menggunakan PSU dengan proteksi arus|Mengatur arus kecil|Mematikan PSU|Menggunakan probe|a|
36|Kesalahan dalam penggunaan PSU adalah?|Salah menghubungkan polaritas (+) dan (-)|Mengatur tegangan sesuai|Menggunakan ground|Mematikan PSU|a|
37|Kesalahan dalam penggunaan PSU adalah?|Menyentuh probe dengan tangan basah|Menggunakan sarung tangan|Mengatur arus|Mematikan alat|a|
38|Yang tidak boleh dilakukan terkait data pelanggan adalah?|Mengakses data pribadi tanpa izin|Menjaga kerahasiaan data|Mengunci perangkat|Menghapus data sesuai izin|a|
`
function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

function parseQuiz(text) {
    return text.trim().split("\n").map(line => {
        const [, question, a, b, c, d, key] = line.split("|");
        const choices = [a, b, c, d];
        return {
            question,
            choices,
            correct: choices[{ a: 0, b: 1, c: 2, d: 3 }[key]]
        };
    });
}

// ---------- INIT ----------
let quiz = parseQuiz(rawQA);
shuffle(quiz);
quiz.forEach(q => shuffle(q.choices));

let current = 0;
let score = 0;
let selectedAnswer = null;
let locked = false;

// ---------- RENDER ----------
function renderQuestion() {
    selectedAnswer = null;
    locked = false;

    document.getElementById("nextBtn").disabled = true;

    const q = quiz[current];

    document.getElementById("progress").innerText =
        `Question ${current + 1} of ${quiz.length}`;

    document.getElementById("score").innerText =
        `Right ${score} of ${quiz.length}`;

    document.getElementById("question").innerText = q.question;

    const optDiv = document.getElementById("options");
    optDiv.innerHTML = "";

    q.choices.forEach(opt => {
        const div = document.createElement("div");
        div.className = "option";
        div.innerText = opt;

        div.onclick = () => {
            if (locked) return;

            document.querySelectorAll(".option")
                .forEach(o => o.classList.remove("selected"));

            div.classList.add("selected");
            selectedAnswer = opt;
            document.getElementById("nextBtn").disabled = false;
        };

        optDiv.appendChild(div);
    });
}

// ---------- NEXT ----------
function nextQuestion() {
    if (locked || selectedAnswer === null) return;
    locked = true;

    const correct = quiz[current].correct;
    const options = document.querySelectorAll(".option");

    options.forEach(opt => {
    if (opt.classList.contains("selected")) {
        opt.classList.remove("selected"); // ðŸ”¥ important
    }

    if (opt.innerText === correct && selectedAnswer === correct) {
        opt.classList.add("correct");
    }

    if (opt.innerText === selectedAnswer && selectedAnswer !== correct) {
        opt.classList.add("wrong");
    }
});


    if (selectedAnswer === correct) {
        score++;
        document.getElementById("score").innerText =
            `Right ${score} of ${quiz.length}`;
    }

    setTimeout(() => {
        current++;
        if (current < quiz.length) {
            renderQuestion();
        } else {
            document.querySelector(".quiz-box").innerHTML =
                `<div class="score">
                    Quiz Finished<br>
                    Final Score: ${score} / ${quiz.length}
                </div>`;
        }
    }, 1200);
}


// ---------- START ----------
renderQuestion();

</script>

